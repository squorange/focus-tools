@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --background: #0a0a0a;
  --foreground: #ededed;
}

body {
  color: var(--foreground);
  background:
    radial-gradient(circle at 50% 50%, rgba(59, 130, 246, 0.08) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(139, 92, 246, 0.06) 0%, transparent 40%),
    radial-gradient(circle at 20% 80%, rgba(236, 72, 153, 0.05) 0%, transparent 40%),
    linear-gradient(135deg, #0f0f23 0%, #1a1a2e 25%, #16213e 50%, #1a1a2e 75%, #0f0f23 100%);
  font-family: Arial, Helvetica, sans-serif;
  margin: 0;
  padding: 0;
  overflow: hidden;
  background-attachment: fixed;
}

/* Enable 3D transforms for z-index control */
.orbital-system {
  perspective: 2000px;
  transform-style: preserve-3d;
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}

/* Orbital animations for tasks - container orbits */
@keyframes orbit-slow {
  from {
    transform: rotate(var(--starting-angle, 0deg));
  }
  to {
    transform: rotate(calc(var(--starting-angle, 0deg) + 360deg));
  }
}

@keyframes orbit-medium {
  from {
    transform: rotate(var(--starting-angle, 0deg));
  }
  to {
    transform: rotate(calc(var(--starting-angle, 0deg) + 360deg));
  }
}

@keyframes orbit-fast {
  from {
    transform: rotate(var(--starting-angle, 0deg));
  }
  to {
    transform: rotate(calc(var(--starting-angle, 0deg) + 360deg));
  }
}

/* Counter-rotation for text to keep horizontal */
@keyframes counter-orbit-slow {
  from {
    transform: rotate(calc(-1 * var(--starting-angle, 0deg)));
  }
  to {
    transform: rotate(calc(-1 * var(--starting-angle, 0deg) - 360deg));
  }
}

@keyframes counter-orbit-medium {
  from {
    transform: rotate(calc(-1 * var(--starting-angle, 0deg)));
  }
  to {
    transform: rotate(calc(-1 * var(--starting-angle, 0deg) - 360deg));
  }
}

@keyframes counter-orbit-fast {
  from {
    transform: rotate(calc(-1 * var(--starting-angle, 0deg)));
  }
  to {
    transform: rotate(calc(-1 * var(--starting-angle, 0deg) - 360deg));
  }
}

.orbit-slow {
  animation: orbit-slow 90s linear infinite;
  transform-style: preserve-3d;
}

.orbit-medium {
  animation: orbit-medium 70s linear infinite;
  transform-style: preserve-3d;
}

.orbit-fast {
  animation: orbit-fast 50s linear infinite;
  transform-style: preserve-3d;
}

/* Counter animations for text */
.counter-orbit-slow {
  animation: counter-orbit-slow 90s linear infinite;
  transform-style: preserve-3d;
}

.counter-orbit-medium {
  animation: counter-orbit-medium 70s linear infinite;
  transform-style: preserve-3d;
}

.counter-orbit-fast {
  animation: counter-orbit-fast 50s linear infinite;
  transform-style: preserve-3d;
}

/* Subtask orbital animations - variable speeds based on distance */
@keyframes orbit-subtask-fast {
  from {
    transform: rotate(var(--starting-angle, 0deg));
  }
  to {
    transform: rotate(calc(var(--starting-angle, 0deg) + 360deg));
  }
}

@keyframes orbit-subtask-medium {
  from {
    transform: rotate(var(--starting-angle, 0deg));
  }
  to {
    transform: rotate(calc(var(--starting-angle, 0deg) + 360deg));
  }
}

@keyframes orbit-subtask-slow {
  from {
    transform: rotate(var(--starting-angle, 0deg));
  }
  to {
    transform: rotate(calc(var(--starting-angle, 0deg) + 360deg));
  }
}

@keyframes counter-orbit-subtask-fast {
  from {
    transform: rotate(calc(-1 * var(--starting-angle, 0deg)));
  }
  to {
    transform: rotate(calc(-1 * var(--starting-angle, 0deg) - 360deg));
  }
}

@keyframes counter-orbit-subtask-medium {
  from {
    transform: rotate(calc(-1 * var(--starting-angle, 0deg)));
  }
  to {
    transform: rotate(calc(-1 * var(--starting-angle, 0deg) - 360deg));
  }
}

@keyframes counter-orbit-subtask-slow {
  from {
    transform: rotate(calc(-1 * var(--starting-angle, 0deg)));
  }
  to {
    transform: rotate(calc(-1 * var(--starting-angle, 0deg) - 360deg));
  }
}

.orbit-subtask-fast {
  animation: orbit-subtask-fast 55s linear infinite;
  transform-style: preserve-3d;
}

.orbit-subtask-medium {
  animation: orbit-subtask-medium 70s linear infinite;
  transform-style: preserve-3d;
}

.orbit-subtask-slow {
  animation: orbit-subtask-slow 85s linear infinite;
  transform-style: preserve-3d;
}

.counter-orbit-subtask-fast {
  animation: counter-orbit-subtask-fast 55s linear infinite;
  animation-fill-mode: both;
  transform-style: preserve-3d;
}

.counter-orbit-subtask-medium {
  animation: counter-orbit-subtask-medium 70s linear infinite;
  animation-fill-mode: both;
  transform-style: preserve-3d;
}

.counter-orbit-subtask-slow {
  animation: counter-orbit-subtask-slow 85s linear infinite;
  animation-fill-mode: both;
  transform-style: preserve-3d;
}

/* Pause all animations on any hover */
.orbital-system:has(.task-node:hover) .orbit-slow,
.orbital-system:has(.task-node:hover) .orbit-medium,
.orbital-system:has(.task-node:hover) .orbit-fast,
.orbital-system:has(.task-node:hover) .counter-orbit-slow,
.orbital-system:has(.task-node:hover) .counter-orbit-medium,
.orbital-system:has(.task-node:hover) .counter-orbit-fast {
  animation-play-state: paused;
}

/* Pause animations during zoom transition */
.orbit-slow.zooming,
.orbit-medium.zooming,
.orbit-fast.zooming,
.counter-orbit-slow.zooming,
.counter-orbit-medium.zooming,
.counter-orbit-fast.zooming {
  animation-play-state: paused !important;
}

/* Pause subtask animations on any subtask hover */
.orbital-system:has(.subtask-node:hover) .orbit-subtask-fast,
.orbital-system:has(.subtask-node:hover) .orbit-subtask-medium,
.orbital-system:has(.subtask-node:hover) .orbit-subtask-slow,
.orbital-system:has(.subtask-node:hover) .counter-orbit-subtask-fast,
.orbital-system:has(.subtask-node:hover) .counter-orbit-subtask-medium,
.orbital-system:has(.subtask-node:hover) .counter-orbit-subtask-slow {
  animation-play-state: paused;
}

/* Smooth transitions for interactions */
.task-node {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
}

.task-node:hover {
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5) !important;
}

.task-node-inner {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.task-node:hover .task-node-inner {
  transform: scale(1.15);
}

/* Smooth transitions for subtask interactions */
.subtask-node {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
}

.subtask-node:hover {
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5) !important;
}

/* Focus mode animations */
@keyframes pulse-gentle {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.85;
  }
}

.animate-pulse-gentle {
  animation: pulse-gentle 2s ease-in-out infinite;
}

@keyframes glow-focus {
  0%,
  100% {
    box-shadow:
      0 0 15px rgba(168, 85, 247, 0.3),
      0 0 30px rgba(59, 130, 246, 0.2),
      0 0 45px rgba(139, 92, 246, 0.1);
  }
  50% {
    box-shadow:
      0 0 20px rgba(168, 85, 247, 0.4),
      0 0 40px rgba(59, 130, 246, 0.3),
      0 0 60px rgba(139, 92, 246, 0.15);
  }
}

.animate-glow-focus {
  animation: glow-focus 3s ease-in-out infinite;
}

/* Moon orbit animations - moons orbiting around their parent task */
@keyframes moon-orbit {
  from {
    transform: rotate(var(--moon-starting-angle, 0deg));
  }
  to {
    transform: rotate(calc(var(--moon-starting-angle, 0deg) + 360deg));
  }
}

.moon-orbit-fast {
  animation: moon-orbit 40s linear infinite;
  transform-style: preserve-3d;
}

.moon-orbit-normal {
  animation: moon-orbit 50s linear infinite;
  transform-style: preserve-3d;
}

.moon-orbit-slow {
  animation: moon-orbit 70s linear infinite;
  transform-style: preserve-3d;
}

/* Cloud drift animations for planet atmosphere - organic movement with larger range */
@keyframes cloud-drift-1 {
  0% {
    background-position: 0% 0%, 0% 0%, 0% 0%, 0% 0%, 0% 0%;
  }
  25% {
    background-position: 17% -14%, -12% 20%, 22% 12%, -17% -16%, 10% -8%;
  }
  50% {
    background-position: 28% -22%, -20% 31%, 33% 20%, -28% -24%, 17% -14%;
  }
  75% {
    background-position: 14% -12%, -14% 17%, 20% 10%, -12% -18%, 8% -10%;
  }
  100% {
    background-position: 0% 0%, 0% 0%, 0% 0%, 0% 0%, 0% 0%;
  }
}

@keyframes cloud-drift-2 {
  0% {
    background-position: 0% 0%, 0% 0%, 0% 0%, 0% 0%;
  }
  33% {
    background-position: -18% 20%, 22% -12%, -14% 18%, 16% -20%;
  }
  66% {
    background-position: -28% 32%, 35% -22%, -24% 30%, 28% -32%;
  }
  100% {
    background-position: 0% 0%, 0% 0%, 0% 0%, 0% 0%;
  }
}

@keyframes cloud-drift-3 {
  0% {
    background-position: 0% 0%, 0% 0%, 0% 0%, 0% 0%;
  }
  20% {
    background-position: 10% 15%, -12% -8%, 18% -12%, -10% 20%;
  }
  40% {
    background-position: 20% 25%, -22% -16%, 28% -20%, -18% 32%;
  }
  60% {
    background-position: 15% 20%, -18% -12%, 22% -16%, -14% 26%;
  }
  80% {
    background-position: 8% 10%, -10% -6%, 14% -8%, -6% 15%;
  }
  100% {
    background-position: 0% 0%, 0% 0%, 0% 0%, 0% 0%;
  }
}

/* Organic cloud animations - pulse and drift */
@keyframes cloud-pulse {
  0%, 100% {
    transform: translate(-50%, -50%) scale(1);
    filter: blur(var(--blur-base, 35px));
  }
  33% {
    transform: translate(-50%, -50%) scale(1.08) rotate(1deg);
    filter: blur(calc(var(--blur-base, 35px) + 3px));
  }
  66% {
    transform: translate(-50%, -50%) scale(0.95) rotate(-0.5deg);
    filter: blur(calc(var(--blur-base, 35px) - 3px));
  }
}

@keyframes cloud-drift {
  0%, 100% {
    translate: 0 0;
  }
  25% {
    translate: 4vw -1.5vw;
  }
  50% {
    translate: 7vw 1vw;
  }
  75% {
    translate: 2.5vw 2vw;
  }
}

.animate-cloud-pulse {
  animation: cloud-pulse var(--pulse-duration, 50s) ease-in-out infinite;
  transform-origin: center center;
}

.animate-cloud-drift {
  animation: cloud-drift var(--drift-duration, 100s) ease-in-out infinite;
  /* GPU acceleration hint */
  transform: translate3d(0, 0, 0);
}

/* Large atmospheric feature animations */
@keyframes atmosphere-drift-1 {
  0%, 100% {
    translate: 0 0;
  }
  50% {
    translate: 8vw -2vw;
  }
}

@keyframes atmosphere-drift-2 {
  0%, 100% {
    translate: 0 0;
  }
  50% {
    translate: -7vw 1.5vw;
  }
}

.animate-atmosphere-drift-1 {
  animation: atmosphere-drift-1 130s ease-in-out infinite;
}

.animate-atmosphere-drift-2 {
  animation: atmosphere-drift-2 140s ease-in-out infinite;
}

/* Weather wander animation - flat elliptical traverse left-to-right (viewport-scaled) */
@keyframes weather-traverse-1 {
  0%, 100% {
    transform: translate(-50%, -50%) translateX(0vw) translateY(0vw);
  }
  25% {
    transform: translate(-50%, -50%) translateX(10.5vw) translateY(-1.2vw);
  }
  50% {
    transform: translate(-50%, -50%) translateX(18vw) translateY(-0.6vw);
  }
  75% {
    transform: translate(-50%, -50%) translateX(10.5vw) translateY(1.2vw);
  }
}

@keyframes weather-traverse-2 {
  0%, 100% {
    transform: translate(-50%, -50%) translateX(0vw) translateY(0vw);
  }
  25% {
    transform: translate(-50%, -50%) translateX(-7vw) translateY(0.9vw);
  }
  50% {
    transform: translate(-50%, -50%) translateX(-12vw) translateY(0.4vw);
  }
  75% {
    transform: translate(-50%, -50%) translateX(-7vw) translateY(-0.9vw);
  }
}

@keyframes weather-traverse-3 {
  0%, 100% {
    transform: translate(-50%, -50%) translateX(0vw) translateY(0vw);
  }
  25% {
    transform: translate(-50%, -50%) translateX(5.5vw) translateY(-1.1vw);
  }
  50% {
    transform: translate(-50%, -50%) translateX(9vw) translateY(-0.5vw);
  }
  75% {
    transform: translate(-50%, -50%) translateX(5.5vw) translateY(1.1vw);
  }
}

/* Weather fade animations - varied timing and opacity ranges */
@keyframes weather-fade-1 {
  0%, 100% {
    opacity: 0.4;
  }
  50% {
    opacity: 1;
  }
}

@keyframes weather-fade-2 {
  0%, 100% {
    opacity: 0.25;
  }
  50% {
    opacity: 0.95;
  }
}

@keyframes weather-fade-3 {
  0%, 100% {
    opacity: 0.35;
  }
  50% {
    opacity: 1;
  }
}

/* Opacity pulse animations for color shifting */
@keyframes opacity-pulse-1 {
  0%, 100% {
    opacity: 0.7;
  }
  50% {
    opacity: 1;
  }
}

@keyframes opacity-pulse-2 {
  0%, 100% {
    opacity: 0.6;
  }
  50% {
    opacity: 0.95;
  }
}

.animate-cloud-drift-1 {
  animation: cloud-drift-1 25s ease-in-out infinite;
}

.animate-cloud-drift-2 {
  animation: cloud-drift-2 45s ease-in-out infinite;
}

.animate-cloud-drift-3 {
  animation: cloud-drift-3 55s ease-in-out infinite;
}

.animate-opacity-pulse-1 {
  animation: opacity-pulse-1 25s ease-in-out infinite;
}

.animate-opacity-pulse-2 {
  animation: opacity-pulse-2 35s ease-in-out infinite;
}

.animate-weather-traverse-1 {
  animation: weather-traverse-1 45s ease-in-out infinite, weather-fade-1 38s ease-in-out infinite;
}

.animate-weather-traverse-2 {
  animation: weather-traverse-2 60s ease-in-out infinite, weather-fade-2 52s ease-in-out infinite;
}

.animate-weather-traverse-3 {
  animation: weather-traverse-3 30s ease-in-out infinite, weather-fade-3 25s ease-in-out infinite;
}

.animate-weather-fade {
  animation: weather-fade 45s ease-in-out infinite;
}
